<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="../css/Normalize.css" />
    <link rel="stylesheet" href="../css/globla/header.css" />
    <link rel="stylesheet" href="../css/news.css" />
    <link rel="stylesheet" href="../css/bootstrap-4.6.1-dist/vendor/bootstrap/css/bootstrap.css" />
    <link rel="stylesheet" href="../css/bootstrap-4.6.1-dist/dist/css/bootstrapValidator.css" />

    <script src="../css/bootstrap-4.6.1-dist/vendor/jquery/jquery-1.10.2.min.js"></script>
    <script src="../css/bootstrap-4.6.1-dist/vendor/bootstrap/js/bootstrap.min.js"></script>
    <script src="../css/bootstrap-4.6.1-dist/dist/js/bootstrapValidator.js"></script>
  </head>
  <body>
    <div class="headerLogo">
      <img src="../static/top-2.jpg" class="img-fluid" alt="..." />
      <div class="discription media">
        <img src="../static/logo2.png" class="align-self-center mr-3" alt="..." />
        <div class="media-body logoColor">
          <h1 class="mt-0 logoColor"><strong>打造地方红色文化新高地</strong></h1>
          <p class="fontSize21 logoColor"><strong>保护红色资源 · 传承红色文化 · 弘扬革命传统</strong></p>
        </div>
      </div>
    </div>
    <nav>
      <ul class="navi">
        <li><a href="./index.html">网站首页</a></li>
        <li><a href="./news.html">红色资讯</a></li>
        <li><a href="./famers.html">红土骄子</a></li>
        <li><a href="./gsyz.html">高山仰止</a></li>
        <li><a href="./hsll.html">红色理论</a></li>
        <li><a href="./history.html">红色历史</a></li>
        <li><a href="./culture.html">红色文化</a></li>
        <li class="activity"><a href="./register.html">登录/注册</a></li>
      </ul>
    </nav>
    <main>
      <div style="width: 1200px">
        <div class="bread">
          <span>当前位置：</span>
          <span><a href="./index.html">网站首页</a></span>
          <span>></span>
          <span><a href="./register.html">登录/注册</a></span>
        </div>
        <div class="content">
          <div class="essay" style="margin: 0">
            <section class="feedbackForm">
              <div class="col-lg-10 col-lg-offset-2 center">
                <div class="page-header">
                  <h2>用户反馈</h2>
                  <p style="padding-right: 150px">
                    感谢您使用本网站，您对本网站有任何意见和建议，或在使用过程中遇到问题，都可以在本页进行反馈，我们会认真阅读您的反馈，不断优化产品，为您提供更好的服务！
                  </p>
                </div>
                <form id="feedbackForm" method="post" class="form-horizontal">
                  <div class="form-group">
                    <label class="col-lg-3 control-label">1.您常用的账户名是？</label>
                    <div class="col-lg-5">
                      <input type="text" class="form-control" name="username" />
                    </div>
                  </div>

                  <div class="form-group">
                    <label class="col-lg-3 control-label">2.您常用的电话号码是？</label>
                    <div class="col-lg-5">
                      <input type="text" class="form-control" name="phoneNumber" />
                    </div>
                  </div>

                  <div class="form-group">
                    <label class="col-lg-3 control-label">您对当目前这个网站的整体满意度如何？</label>
                    <div class="col-lg-5">
                      <div class="radio">
                        <label> <input type="radio" name="satisfaction" value="good" /> 满意 </label>
                      </div>
                      <div class="radio">
                        <label> <input type="radio" name="satisfaction" value="general" /> 一般 </label>
                      </div>
                      <div class="radio">
                        <label> <input type="radio" name="satisfaction" value="bad" /> 不满意 </label>
                      </div>
                    </div>
                  </div>
                  <div class="form-group">
                    <label class="col-lg-3 control-label">您访问页面速度的情况是？</label>
                    <div class="col-lg-5">
                      <div class="radio">
                        <label> <input type="radio" name="speed" value="fast" /> 很快 </label>
                      </div>
                      <div class="radio">
                        <label> <input type="radio" name="speed" value="normal" /> 一般 </label>
                      </div>
                      <div class="radio">
                        <label> <input type="radio" name="speed" value="low" /> 较慢 </label>
                      </div>
                    </div>
                  </div>

                  <div class="form-group">
                    <label class="col-lg-3 control-label">您从哪里知道这个网站？</label>
                    <div class="col-lg-5">
                      <div class="checkbox">
                        <label> <input type="checkbox" name="languages[]" value="recommend" /> 朋友推荐 </label>
                      </div>
                      <div class="checkbox">
                        <label> <input type="checkbox" name="languages[]" value="leaflet" /> 线下传单 </label>
                      </div>
                      <div class="checkbox">
                        <label> <input type="checkbox" name="languages[]" value="advertising" /> 线上广告 </label>
                      </div>
                      <div class="checkbox">
                        <label style="font-weight: normal">
                          <input type="checkbox" name="languages[]" value="other" /> 其它渠道
                        </label>
                        <input type="text" class="form-control" name="other" placeholder="请输入其它渠道" />
                      </div>
                    </div>
                  </div>

                  <div class="form-group">
                    <div class="col-lg-9 col-lg-offset-3">
                      <button type="submit" class="btn btn-primary" name="signup" value="Sign up">提交</button>
                    </div>
                  </div>
                </form>
              </div>
            </section>
            <section class="loginForm">
              <div class="col-lg-8 col-lg-offset-2 center">
                <form id="loginForm" method="post" class="form-horizontal">
                  <div class="alert alert-success" style="display: none"></div>

                  <div class="form-group">
                    <label class="col-lg-3 control-label">用户账号</label>
                    <div class="col-lg-5">
                      <input type="text" class="form-control" name="loginuserAccount" />
                    </div>
                  </div>

                  <div class="form-group">
                    <label class="col-lg-3 control-label">用户密码</label>
                    <div class="col-lg-5">
                      <input
                        type="password"
                        class="form-control"
                        name="loginpassword"
                        data-bv-identical="true"
                        data-bv-different="true"
                        data-bv-different-field="registerUsername"
                        data-bv-different-message="用户密码不能与用户名称一致"
                      />
                    </div>
                  </div>

                  <div class="form-group">
                    <div class="col-lg-5 col-lg-offset-4">
                      <button type="submit" class="btn">登录</button>
                    </div>
                  </div>
                </form>
              </div>
            </section>
            <section class="registerForm">
              <div class="col-lg-8 col-lg-offset-2 center">
                <form id="registerForm" method="post" class="form-horizontal">
                  <div class="alert alert-success" style="display: none"></div>

                  <div class="form-group">
                    <label class="col-lg-3 control-label">用户名称</label>
                    <div class="col-lg-5">
                      <input type="text" class="form-control" name="registerUsername" />
                    </div>
                  </div>

                  <div class="form-group">
                    <label class="col-lg-3 control-label">用户账号</label>
                    <div class="col-lg-5">
                      <input type="text" class="form-control" name="userAccount" />
                    </div>
                  </div>

                  <div class="form-group">
                    <label class="col-lg-3 control-label">用户邮箱</label>
                    <div class="col-lg-5">
                      <input type="text" class="form-control" name="userEmail" />
                    </div>
                  </div>

                  <div class="form-group">
                    <label class="col-lg-3 control-label">用户密码</label>
                    <div class="col-lg-5">
                      <input
                        type="password"
                        class="form-control"
                        name="registerpassword"
                        required
                        data-bv-notempty-message="用户密码不能为空"
                        data-bv-identical="true"
                        data-bv-identical-field="confirmPassword"
                        data-bv-identical-message="两次输入密码不一致"
                        data-bv-different="true"
                        data-bv-different-field="registerUsername"
                        data-bv-different-message="用户密码不能与用户名称一致"
                      />
                    </div>
                  </div>

                  <div class="form-group">
                    <label class="col-lg-3 control-label">重复密码</label>
                    <div class="col-lg-5">
                      <input
                        type="password"
                        class="form-control"
                        name="confirmPassword"
                        required
                        data-bv-notempty-message="重复输入密码不能为空"
                        data-bv-identical="true"
                        data-bv-identical-field="registerpassword"
                        data-bv-identical-message="两次输入密码不一致"
                        data-bv-different="true"
                        data-bv-different-field="registerUsername"
                        data-bv-different-message="用户密码不能与用户名称一致"
                      />
                    </div>
                  </div>

                  <div class="form-group">
                    <div class="col-lg-5 col-lg-offset-4">
                      <button type="submit" class="btn">注册</button>
                    </div>
                  </div>
                </form>
              </div>
            </section>
          </div>
          <div class="nav">
            <a href="./news.html"><span class="firsSpan">登录/注册</span></a>
            <a href="./register.html?category=登录"><span class="ortherSpan">用户登录</span></a>
            <a href="./register.html?category=注册"><span class="ortherSpan">用户注册</span></a>
            <a href="./register.html?category=反馈"><span class="ortherSpan">意见反馈</span></a>
            <img src="../static/lxfs.jpg" alt="" />
          </div>
        </div>
      </div>
    </main>
  </body>
  <script>
    const lis = $(".essay > ul > li")
    function removeItem(descript) {
      $(".essay > ul").empty()
      lis.map((index, item) => {
        if ($(item).attr("data-discrip") === descript) {
          $(".essay > ul").append(item)
        }
      })
      $(".bread span").length === 4
        ? $(".bread").append(`
      <span>></span>
      <span>
        <a href="#">${descript}</a>
        </span>
      `)
        : $($(".bread span a")[2]).text(descript)
      $(".bread span:nth-of-type(4) > a").attr("href", "./news.html")
    }
    function removeStyle(list) {
      list.map((index, item) => {
        $(item).removeClass("select")
      })
    }
    const heafArray = location.href.split("?")
    const alsit = $(".handle a")
    if (heafArray.length > 1) {
      const category = decodeURI(heafArray[1].split("=")[1])
      removeItem(category)
      switch (category) {
        case "登录":
          $(".registerForm").hide()
          $(".feedbackForm").hide()
          break
        case "注册":
          $(".loginForm").hide()
          $(".feedbackForm").hide()
          break
        case "反馈":
          $(".loginForm").hide()
          $(".registerForm").hide()
          break
      }
    } else {
      removeItem("登录")
      $(".registerForm").hide()
      $(".feedbackForm").hide()
    }

    function register() {
      if (localStorage.getItem("userAccounts")) {
        let obj = localStorage.getItem("userAccounts")
        obj[$("input[name='userAccount']")] = {
          usernmae: $("input[name='registerUsername']").val(),
          account: $("input[name='userAccount']").val(),
          password: $("input[name='registerpassword']").val(),
          email: $("input[name='userEmail']").val(),
        }
        localStorage.setItem("userAccounts", JSON.stringify(obj))
      } else {
        let obj = {}
        obj[$("input[name='userAccount']").val()] = {
          usernmae: $("input[name='registerUsername']").val(),
          account: $("input[name='userAccount']").val(),
          password: $("input[name='registerpassword']").val(),
          email: $("input[name='userEmail']").val(),
        }
        localStorage.setItem("userAccounts", JSON.stringify(obj))
      }
    }

    $(function () {
      const lis = $(".navi > li")
      const navi = $(".navi")
      navi.mouseenter(function () {
        lis.map((index, item) => {
          $(item).removeClass("activity")
        })
      })
      navi.mouseleave(function () {
        $(lis[7]).addClass("activity")
      })
    })
  </script>
  <!-- 表单验证脚本 -->
  <script type="text/javascript">
    $(document).ready(function () {
      $("#registerForm")
        .bootstrapValidator({
          message: "This value is not valid",
          //live: 'submitted',
          feedbackIcons: {
            valid: "glyphicon glyphicon-ok",
            invalid: "glyphicon glyphicon-remove",
            validating: "glyphicon glyphicon-refresh",
          },
          fields: {
            registerUsername: {
              message: "The username is not valid",
              validators: {
                notEmpty: {
                  message: "用户名称不能为空",
                },
                stringLength: {
                  min: 4,
                  max: 30,
                  message: "用户名称必需大于4个字符小于30个字符",
                },
                /*remote: {
                          url: 'remote.php',
                          message: 'The username is not available'
                      },*/
                // regexp: {
                //   regexp: /^[a-zA-Z0-9_\.]+$/,
                //   message: "The username can only consist of alphabetical, number, dot and underscore",
                // },
              },
            },
            userAccount: {
              message: "The username is not valid",
              validators: {
                notEmpty: {
                  message: "用户账户不能为空",
                },
                stringLength: {
                  min: 4,
                  max: 30,
                  message: "用户账户长度必需大于4个字符且小于30个字符",
                },
                /*remote: {
                          url: 'remote.php',
                          message: 'The username is not available'
                      },*/
                // regexp: {
                //   regexp: /^[a-zA-Z0-9_\.]+$/,
                //   message: "The username can only consist of alphabetical, number, dot and underscore",
                // },
              },
            },
            userEmail: {
              validators: {
                notEmpty: {
                  message: "用户邮箱不能为空",
                },
                emailAddress: {
                  message: "请输入正确的邮箱格式",
                },
              },
            },
            //   password: {
            //     validators: {
            //       notEmpty: {
            //         message: "The password is required and can't be empty",
            //       },
            //     },
            //   },
          },
        })
        .on("success.form.bv", function (e) {
          // Prevent submit form
          register()
          e.preventDefault()
          var $form = $(e.target),
            validator = $form.data("bootstrapValidator")
          $form
            .find(".alert")
            .html(
              "注册成功，现在您可以用过账户" +
                validator.getFieldElements("userAccount").val() +
                "登录,三秒后跳转到登录页"
            )
            .show()
          setInterval(() => {
            location.href = "./register.html?category=登录"
          })
        })
      $("#loginForm")
        .bootstrapValidator({
          message: "This value is not valid",
          //live: 'submitted',
          feedbackIcons: {
            valid: "glyphicon glyphicon-ok",
            invalid: "glyphicon glyphicon-remove",
            validating: "glyphicon glyphicon-refresh",
          },
          fields: {
            loginuserAccount: {
              message: "The username is not valid",
              validators: {
                stringLength: {
                  min: 4,
                  max: 30,
                  message: "用户账户长度必需大于4个字符且小于30个字符",
                },
                callback: {
                  callback: function (value, validator, $field) {
                    if (value !== "") {
                      if (
                        localStorage.getItem("userAccounts") === null ||
                        JSON.parse(localStorage.getItem("userAccounts"))[value] === undefined
                      ) {
                        return { valid: false, message: "该账户不存在" }
                      } else return { valid: true }
                    } else return { valid: false, message: "用户账户不能为空" }
                  },
                },
              },
            },
            loginpassword: {
              message: "The password is not valid",
              validators: {
                callback: {
                  callback: function (value, validator, $field) {
                    const userAccount = $("input[name='loginuserAccount']").val()
                    if (value !== "") {
                      if (
                        localStorage.getItem("userAccounts") !== null &&
                        JSON.parse(localStorage.getItem("userAccounts"))[userAccount] !== undefined &&
                        JSON.parse(localStorage.getItem("userAccounts"))[userAccount].password === value
                      ) {
                        return { valid: true }
                      } else {
                        return {
                          valid: false,
                          message: "密码错误",
                        }
                      }
                    } else return { valid: false, message: "密码不能为空" }
                  },
                },
              },
            },
          },
        })
        .on("success.form.bv", function (e) {
          // Prevent submit form
          e.preventDefault()
          var $form = $(e.target),
            validator = $form.data("bootstrapValidator")
          $form
            .find(".alert")
            .html(validator.getFieldElements("loginuserAccount").val() + "登录成功，两秒后自动跳转到网站首页")
            .show()
          const userInfo = JSON.parse(localStorage.getItem("userAccounts"))
          const username = userInfo[$("input[name='loginuserAccount']").val()].usernmae
          localStorage.setItem(
            "login",
            JSON.stringify({
              state: true,
              username: username,
            })
          )
          setInterval(() => {
            location.href = "./index.html"
          }, 2000)
        })
    })
  </script>

  <!-- 反馈表单验证脚本 -->

  <script type="text/javascript">
    $(document).ready(function () {
      $("#feedbackForm")
        .bootstrapValidator({
          message: "This value is not valid",
          feedbackIcons: {
            valid: "glyphicon glyphicon-ok",
            invalid: "glyphicon glyphicon-remove",
            validating: "glyphicon glyphicon-refresh",
          },
          fields: {
            username: {
              message: "The username is not valid",
              validators: {
                notEmpty: {
                  message: "请输入您常用的用户名称",
                },
                stringLength: {
                  min: 4,
                  max: 30,
                  message: "用户名称不少与4个字符串并且少于30个字符串",
                },
              },
            },
            phoneNumber: {
              validators: {
                notEmpty: {
                  message: "请输入您常用的电话号码",
                },
                digits: {
                  message: "请输入正确的电话号码",
                },
                phone: {
                  country: "CN",
                  message: "请输入正确的电话号码",
                },
              },
            },
            satisfaction: {
              validators: {
                notEmpty: {
                  message: "请选择您对本网站的满意度评价",
                },
              },
            },
            speed: {
              validators: {
                notEmpty: {
                  message: "请选择您对本网站浏览速度的评价",
                },
              },
            },
            "languages[]": {
              validators: {
                notEmpty: {
                  message: "请选择您认识本网站的渠道",
                },
              },
            },
          },
        })
        .on("success.form.bv", function (e) {
          // Prevent submit form
          e.preventDefault()
          var $form = $(e.target),
            validator = $form.data("bootstrapValidator")
          $form.find(".alert").html("提交成功，感谢您的反馈").show()
        })
    })
  </script>
  <style>
    main {
      margin-top: 20px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    .registerForm,
    .loginForm {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .handle {
      padding: 20px 0;
      display: flex;
      flex-direction: row;
      justify-content: center;
      align-items: center;
    }
    .handle span {
      display: inline-block;
      height: 25px;
      margin: 0 20px;
      border-right: 1px solid #5a5a5a;
    }

    .handle a {
      font-size: 20px;
      font-weight: bold;
      color: #5a5a5a;
    }

    .handle a:hover {
      text-decoration: none;
    }

    a[class*="select"] {
      color: #cc0000;
    }

    .registerItem,
    .loginItem {
      padding: 15px 0;
    }

    .essay {
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .essay section {
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .essay section button {
      width: 130px;
      background-color: #cc0000;
      color: #ffe599;
      border: none;
      outline: none;
    }

    .essay section button:hover {
      color: #ffe599;
    }

    .essay section button:active {
      border: none;
      outline: none;
      background-color: #cc0000;
      color: #ffe599;
    }

    .feedbackForm .form-group > label {
      font-size: 10px;
    }

    /* .feedbackForm .form-group {
      display: flex;
      flex-direction: column;
    } */
    /* label {
      padding: 0 5px;
      font-size: 16px;
      color: #5a5a5a;
    }

    input {
      padding: 5px 3px;
      border: none;
      border-bottom: 1px solid #cc0000;
      color: #5a5a5a;
      font-size: 16px;
    }
    input:focus {
      outline: none;
      border: none;
      border-bottom: 1px solid #5a5a5a;
    }

    button {
      width: 120px;
      height: 40px;
      color: #ffdb60;
      font-size: 20px;
      border: none;
      border-radius: 40px;
      background-color: #cc0000;
    } */
  </style>
</html>
